var version="v3.1.0 Distributable Release - 27/08/10";var Overlay=new Class({initialize:function(b){this.options=$extend({closeLink:true,destroyContent:false,centerOverlay:true,overlayFixedWidth:false,cloneContent:true},b||{});this.overlayMask=new Element("div",{id:"overlay-mask"}).setStyles({"background-color":"#000",width:"100%",height:"100%",position:"fixed",top:"0",left:"0","z-index":"100"}).fade("hide");compatibleOverlay=Browser.Engine.trident4||(this.overlayMask.currentStyle&&(this.overlayMask.currentStyle.position!="fixed"));if(compatibleOverlay){this.overlayMask.setStyles({width:window.getScrollSize().x,height:window.getScrollSize().y,position:"absolute"})}var c=function(){this.hide();return false};var a=c.bind(this);this.overlayMask.addEvent("click",a);this.overlayWindow=new Element("div",{id:"overlay"}).fade("hide");if(!this.options.overlayFixedWidth){this.overlayWindow.setStyles({width:"auto",left:"auto",right:"auto"})}this.overlayWindow.setStyles({margin:"5em 0"});this.contents=new Element("div",{id:"contents"}).inject(this.overlayWindow);if(this.options.closeLink){this.closeButton=new Element("p",{id:"close"}).inject(this.overlayWindow);this.closeLink=new Element("a",{html:"Close&nbsp;this&nbsp;window"}).setStyles({width:"100%",cursor:"pointer"}).inject(this.closeButton);this.closeLink.addEvent("mouseup",a)}this.overlayMask.set("tween",{duration:"400"});this.overlayWindow.set("tween",{duration:"400"});$(document.body).adopt(this.overlayWindow,this.overlayMask)},show:function(d,c){this.options=$extend(this.options,c||{});this.injectContent(d);this.overlayWindow.setStyles({top:window.getScrollTop()+20});if(this.options.centerOverlay){var b=window.getScrollSize();var a=this.overlayWindow.getSize();this.overlayWindow.setStyles({left:(b.x/2)-(a.x/2),top:window.getScrollTop()+20})}this.fadeInOverlayMask.bind(this).delay("0");this.fadeInOverlayWindow.bind(this).delay("200")},hide:function(){this.overlayMask.fade("out");this.overlayWindow.fade("out");if(this.options.destroyContent){this.destroyContents.delay("400",this)}},injectContent:function(a){this.contents.empty();if(this.options.cloneContent){a.clone().inject(this.contents)}else{a.inject(this.contents)}},destroyContents:function(){this.contents.empty()},fadeInOverlayMask:function(){this.overlayMask.fade(0,0.8)},fadeOutOverlayMask:function(){this.overlayMask.fade("out")},fadeInOverlayWindow:function(){this.overlayWindow.fade(0,1)},fadeOutOverlayWindow:function(){this.overlayWindow.fade("out")}});